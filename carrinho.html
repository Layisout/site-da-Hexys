<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexys - Clash Royale Tournament</title>
    <link rel="stylesheet" href="styles.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="icon" href="logo-hexys.jpg" type="image/jpg">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="logo-hexys.jpg" alt="Logo Hexys" class="logo-header">
            <h1 class="team-name">HEXYS</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index2.html">InÃ­cio</a></li>
                <li><a href="#evento">Evento</a></li>
                <li><a href="#noticias">NotÃ­cias</a></li>
                <li><a href="time.html">Time</a></li>
                <li><a href="lojaoficial.html">Loja</a></li>
                <li><a href="#transmissao">Live</a></li>
                <li>
                    <a href="#loja" id="nav-cart-btn" class="nav-cart-icon" title="Ver Carrinho">
                        ðŸ›’ (<span id="header-cart-count">0</span>)
                    </a>
                </li>
                <li><a href="paginacadastro.html" class="btn-inscricao">Inscreva-se!</a></li>
                <li><a href="paginalogin.html" class="btn-login">Login</a></li>
            </ul>
        </nav>
        <button class="menu-toggle" id="menu-toggle">â˜°</button>
    </header>

    <main>
        <div class="cart-page-container">
            
            <section class="cart-items-section">
                <h2 class="section-title">ðŸ›’ Seu Carrinho de Compras</h2>
                
                <div id="cart-items" class="cart-items-list">
                    <p class="empty-cart-message">Seu carrinho estÃ¡ vazio.</p>
                </div>
                
            </section>
    
            <aside class="cart-summary-aside">
                <div class="summary-box">
                    <p class="subtotal-message">Subtotal (<span id="total-items">0</span> itens):</p>
                    <p class="summary-total-value"><span id="cart-total">R$ 0,00</span></p>
                    
                    <button id="checkout-btn" class="checkout-btn primary-btn" disabled>
                        Finalizar Compra
                    </button>
                </div>
            </aside>
    
        </div>
    </main>
    
    <script>

        const CART_STORAGE_KEY = 'hexysCart';

        let cart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY)) || [];
    
        const availableProducts = [
            { name: "Camisa Oficial Pro - 2025", price: 149.90 },
            { name: "Mousepad Hexys Neon", price: 79.90 },
            { name: "Moletom Team Edition", price: 229.90 }
        ];
    
        const saveCart = () => {
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
        };

        const formatPrice = (price) => {
            const number = typeof price === 'string' ? parseFloat(price.replace('R$', '').replace('.', '').replace(',', '.')) : price;
            return number.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        };
    
        const updateCartUI = () => {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            const totalItemsElement = document.getElementById('total-items');
            const checkoutButton = document.getElementById('checkout-btn');
            const headerCartCount = document.getElementById('header-cart-count'); 
            
            let total = 0;
            let totalItems = 0;
            
            cart.forEach(item => {
                total += item.price * item.quantity;
                totalItems += item.quantity;
            });
    
            if (headerCartCount) {
                headerCartCount.textContent = totalItems;
            }
    
            if (cartItemsContainer) {
                cartItemsContainer.innerHTML = '';
    
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="empty-cart-message">Seu carrinho estÃ¡ vazio.</p>';
                    if (checkoutButton) checkoutButton.disabled = true;
                } else {
                    cart.forEach((item, index) => {
                        const itemTotal = item.price * item.quantity;
                        const cartItemDiv = document.createElement('div');

                        cartItemDiv.classList.add('cart-item-card'); 
                        
                        cartItemDiv.innerHTML = `
                            <div class="item-details-left">
                                <img src="mousepad-generico.jpg" alt="${item.name}" class="item-image">
                                
                                <div class="item-info">
                                    <span class="item-name">${item.name}</span>
                                    <span class="item-stock">Em estoque</span>
                                    <span class="item-price-unit">${formatPrice(item.price)} cada</span>
                                    
                                    <div class="item-controls-visual">
                                        <div class="quantity-control">
                                            <button class="quantity-btn" data-index="${index}" data-action="decrement" aria-label="Diminuir quantidade">-</button>
                                            <span class="item-quantity">${item.quantity}</span>
                                            <button class="quantity-btn" data-index="${index}" data-action="increment" aria-label="Aumentar quantidade">+</button>
                                        </div>
                                        <span class="separator">|</span>
                                        <button class="remove-btn" data-index="${index}">Remover</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="item-total-right">
                                <span class="item-price-total">${formatPrice(itemTotal)}</span>
                            </div>
                        `;
                        cartItemsContainer.appendChild(cartItemDiv);
                    });
                    if (checkoutButton) checkoutButton.disabled = false;
                }

                if (cartTotalElement) cartTotalElement.textContent = formatPrice(total);
                if (totalItemsElement) totalItemsElement.textContent = totalItems;
            }
        };

        const addToCart = (product) => {
            const existingItem = cart.find(item => item.name === product.name);
    
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 }); 
            }
            
            saveCart();
            updateCartUI();
        };
    
        const updateQuantity = (index, action) => { 
            if (index >= 0 && index < cart.length) {
                if (action === 'increment') {
                    cart[index].quantity += 1;
                } else if (action === 'decrement') {
                    cart[index].quantity -= 1;
                    if (cart[index].quantity <= 0) {
                        cart.splice(index, 1);
                    }
                }
            }
            saveCart();
            updateCartUI();
        };
    
        const removeItem = (index) => {
            if (index >= 0 && index < cart.length) {
                cart.splice(index, 1);
            }
            saveCart();
            updateCartUI();
        };
    
        document.addEventListener('DOMContentLoaded', () => {
            const addButtons = document.querySelectorAll('.add-to-cart');
            addButtons.forEach((button, index) => {
                button.addEventListener('click', () => {
                    const product = availableProducts[index]; 
                    addToCart(product);
                });
            });
    
            const cartItemsContainer = document.getElementById('cart-items');
            if (cartItemsContainer) {
                cartItemsContainer.addEventListener('click', (event) => {
                    const target = event.target;
                    const index = target.dataset.index;
    
                    if (target.classList.contains('quantity-btn')) {
                        const action = target.dataset.action;
                        if (index !== undefined && action) {
                            updateQuantity(parseInt(index), action);
                        }
                    } else if (target.classList.contains('remove-btn')) {
                        if (index !== undefined) {
                            removeItem(parseInt(index));
                        }
                    }
                });
            }

            const checkoutButton = document.getElementById('checkout-btn');
            if(checkoutButton) {
                checkoutButton.addEventListener('click', () => {
                    const totalText = document.getElementById('cart-total').textContent;
                    alert(`âœ… FinalizaÃ§Ã£o de Compra Simulada:\nObrigado! Seu pedido no valor de ${totalText} foi "processado".`);
                    
                    cart = []; 
                    saveCart();
                    updateCartUI();
                });
            }

            const navCartBtn = document.getElementById('nav-cart-btn');
            if(navCartBtn) {
                navCartBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.href = 'carrinho.html'; 
                });
            }
    
            updateCartUI();
        });
    </script>
</body>
</html>