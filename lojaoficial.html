<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hexys - Clash Royale Tournament</title>
<link rel="stylesheet" href="styles.css"> <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="icon" href="logo-hexys.jpg" type="image/jpg">
<script src="js/script2.js"></script>
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="logo-hexys.jpg" alt="Logo Hexys" class="logo-header">
            <h1 class="team-name">HEXYS</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index2.html">In√≠cio</a></li>
                <li><a href="#evento">Evento</a></li>
                <li><a href="#noticias">Not√≠cias</a></li>
                <li><a href="#agenda">Agenda</a></li>
                <li><a href="#loja">Loja</a></li>
                <li><a href="#transmissao">Live</a></li>
                <li><a href="paginacadastro.html" class="btn-inscricao">Inscreva-se!</a></li>
                <li><a href="paginalogin.html" class="btn-login">Login</a></li>
                
                <li>
                    <a href="#loja" id="nav-cart-btn" class="nav-cart-icon" title="Ver Carrinho">
                        üõí (<span id="header-cart-count">0</span>)
                    </a>
                </li>
                
                <li><a href="paginacadastro.html" class="btn-inscricao">Inscreva-se!</a></li>
                <li><a href="paginalogin.html" class="btn-login">Login</a></li>
            </ul>
        </nav>
        <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
    </header>

            <main>
                <section id="loja" class="store-section info-section">
                    <div class="store-header-controls">
                        <h3>LOJA OFICIAL</h3>
                        <button id="view-cart-btn" class="view-cart-btn">
                            Ver Carrinho (<span id="btn-total-items">0</span>)
                        </button>
                    </div>
                    
                    <div class="product-catalog cards-container">
                        <div class="info-card product-card">
                            <h4>Camisa Oficial Pro - 2025</h4>
                            <p>R$ 149,90</p>
                            <button class="add-to-cart">Adicionar ao Carrinho</button>
                        </div>
                        <div class="info-card product-card">
                            <h4>Mousepad Hexys Neon</h4>
                            <p>R$ 79,90</p>
                            <button class="add-to-cart">Adicionar ao Carrinho</button>
                        </div>
                        <div class="info-card product-card">
                            <h4>Moletom Team Edition</h4>
                            <p>R$ 229,90</p>
                            <button class="add-to-cart">Adicionar ao Carrinho</button>
                        </div>
                    </div>
                    </section>
            </main>
    
    <script>
        // O nome da chave que o carrinho usar√° no LocalStorage
const CART_STORAGE_KEY = 'hexysCart';

// Estado inicial do carrinho: Tenta carregar do LocalStorage ou inicia vazio
let cart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY)) || [];

// Fun√ß√£o para salvar o estado atual do carrinho no LocalStorage
const saveCart = () => {
    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
};

// Fun√ß√£o para formatar o pre√ßo em moeda BRL (Reais)
const formatPrice = (price) => {
    return price.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
};

// Mapeamento dos produtos dispon√≠veis na loja (Deve ser o mesmo em todas as p√°ginas)
const availableProducts = [
    { name: "Camisa Oficial Pro - 2025", price: 149.90 },
    { name: "Mousepad Hexys Neon", price: 79.90 },
    { name: "Moletom Team Edition", price: 229.90 }
];

// --- Fun√ß√µes de Renderiza√ß√£o e Atualiza√ß√£o ---

/**
 * Atualiza toda a interface do carrinho (lista de itens, resumo e contadores de bot√µes).
 */
const updateCartUI = () => {
    // Estas vari√°veis s√≥ existem se estivermos na p√°gina de carrinho ou loja, respectivamente.
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalElement = document.getElementById('cart-total');
    const totalItemsElement = document.getElementById('total-items');
    const checkoutButton = document.getElementById('checkout-btn');
    const btnTotalItemsElement = document.getElementById('btn-total-items'); 
    const headerCartCount = document.getElementById('header-cart-count'); 
    
    let total = 0;
    let totalItems = 0;
    
    // 1. Calcular totais
    cart.forEach(item => {
        total += item.price * item.quantity;
        totalItems += item.quantity;
    });

    // 2. Atualizar contadores em ambas as p√°ginas
    if (btnTotalItemsElement) {
        btnTotalItemsElement.textContent = totalItems;
    }
    if (headerCartCount) {
        headerCartCount.textContent = totalItems;
    }

    // 3. Renderizar a lista de itens (APENAS SE O CONTAINER EXISTIR - Ex: em carrinho.html)
    if (cartItemsContainer) {
        cartItemsContainer.innerHTML = ''; // Limpa os itens atuais

        if (cart.length === 0) {
            cartItemsContainer.innerHTML = '<p class="empty-cart-message">Seu carrinho est√° vazio.</p>';
            if (checkoutButton) checkoutButton.disabled = true;
        } else {
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                const cartItemDiv = document.createElement('div');
                cartItemDiv.classList.add('cart-item');
                cartItemDiv.innerHTML = `
                    <span class="item-name">${item.name}</span>
                    <div class="item-controls">
                        <button class="quantity-btn" data-index="${index}" data-action="decrement">-</button>
                        <span class="item-quantity">${item.quantity}</span>
                        <button class="quantity-btn" data-index="${index}" data-action="increment">+</button>
                        <span class="item-price">${formatPrice(itemTotal)}</span>
                        <button class="remove-btn" data-index="${index}">Remover</button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItemDiv);
            });
            if (checkoutButton) checkoutButton.disabled = false;
        }

        // Atualiza o resumo (APENAS SE OS ELEMENTOS EXISTIREM)
        if (cartTotalElement) cartTotalElement.textContent = formatPrice(total);
        if (totalItemsElement) totalItemsElement.textContent = totalItems;
    }
};

// --- Fun√ß√µes de Manipula√ß√£o do Carrinho ---

const addToCart = (product) => {
    const existingItem = cart.find(item => item.name === product.name);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ ...product, quantity: 1 }); 
    }
    
    saveCart();
    updateCartUI();
};

const updateQuantity = (index, action) => {
    if (action === 'increment') {
        cart[index].quantity += 1;
    } else if (action === 'decrement') {
        cart[index].quantity -= 1;
        if (cart[index].quantity <= 0) {
            cart.splice(index, 1);
        }
    }
    saveCart();
    updateCartUI();
};

const removeItem = (index) => {
    cart.splice(index, 1);
    saveCart();
    updateCartUI();
};

// --- Configura√ß√£o de Eventos ---

document.addEventListener('DOMContentLoaded', () => {
    // Eventos de adi√ß√£o de produtos (S√ì EXISTEM EM lojaoficial.html)
    const addButtons = document.querySelectorAll('.add-to-cart');
    addButtons.forEach((button, index) => {
        button.addEventListener('click', () => {
            const product = availableProducts[index]; 
            addToCart(product);
        });
    });

    // Eventos de manipula√ß√£o de quantidade/remo√ß√£o (S√ì EXISTEM EM carrinho.html)
    const cartItemsContainer = document.getElementById('cart-items');
    if (cartItemsContainer) {
        cartItemsContainer.addEventListener('click', (event) => {
            const target = event.target;
            const index = target.dataset.index;

            if (target.classList.contains('quantity-btn')) {
                const action = target.dataset.action;
                if (index !== undefined && action) {
                    updateQuantity(parseInt(index), action);
                }
            } else if (target.classList.contains('remove-btn')) {
                if (index !== undefined) {
                    removeItem(parseInt(index));
                }
            }
        });
    }

    // Evento Finalizar Compra (S√ì EXISTE EM carrinho.html)
    const checkoutButton = document.getElementById('checkout-btn');
    if(checkoutButton) {
        checkoutButton.addEventListener('click', () => {
            const totalText = document.getElementById('cart-total').textContent;
            alert(`‚úÖ Finaliza√ß√£o de Compra Simulada:\nObrigado! Seu pedido no valor de ${totalText} foi "processado".`);
            
            // Limpa o carrinho e o storage
            cart = []; 
            saveCart();
            updateCartUI();
        });
    }

    // Configura o bot√£o "Ver Carrinho" (em lojaoficial.html) para NAVEGAR
    const viewCartBtn = document.getElementById('view-cart-btn');
    if(viewCartBtn) {
        viewCartBtn.addEventListener('click', () => {
             // Redireciona para a p√°gina do carrinho
             window.location.href = 'carrinho.html';
        });
    }
    
    // Configura o √çcone do Carrinho (em ambas) para NAVEGAR
    const navCartBtn = document.getElementById('nav-cart-btn');
    if(navCartBtn) {
        navCartBtn.addEventListener('click', (e) => {
             e.preventDefault();
             window.location.href = 'carrinho.html';
        });
    }

    // Inicializa a UI do carrinho ao carregar a p√°gina
    updateCartUI();
});
    </script>
</body>
</html>